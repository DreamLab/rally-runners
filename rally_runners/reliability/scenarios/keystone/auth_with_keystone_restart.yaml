---
{% set repeat = repeat|default(5) %}
  Authenticate.keystone:
{% for iteration in range(repeat) %}
    -
      runner:
        type: "constant_for_duration"
        duration: 20
        concurrency: 5
      sla:
        max_failure_percent: 0
      context:
        users:
          tenants: 2
          users_per_tenant: 2
      hooks:
        -
          name: fault_injection
          args:
            action: restart random keystone service
          trigger:
            name: event
            args:
              unit: iteration
              at: [100]
{% endfor %}
